# hpc6a only in this region
# us-west-2a or us-west-2c
Region: us-east-2
Image:
  Os: ubuntu2004
HeadNode:
  InstanceType: c6a.large
  Networking:
    SubnetId: subnet-0cc6a5b9cf370702d
  Ssh:
    KeyName: dinosaur-performance-study
  LocalStorage:
    RootVolume:
      Size: 50
  Iam:
    # List topology API?
    AdditionalIamPolicies:
      - Policy: arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore
      - Policy: arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryFullAccess

Scheduling:
  Scheduler: slurm
  ScalingStrategy: all-or-nothing 
  SlurmQueues:
  - Name: queue1
    ComputeResources:
    - Name: hpc6a48xlarge
      Instances:
      - InstanceType: hpc6a.48xlarge
      MinCount: 0
      MaxCount: 4    
      Efa:
        Enabled: true
    ComputeSettings:
      LocalStorage:
        RootVolume:
          Size: 50
    Networking:
      SubnetIds:
      - subnet-0cc6a5b9cf370702d
      PlacementGroup:
        Enabled: true
        Id: performance-study

SharedStorage:
- MountDir: /shared      
  Name: ebs
  StorageType: Ebs
  EbsSettings:
    # Might be better to use gp3 for experiments?
    VolumeType: gp2
    Size: 100
